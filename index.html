<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eliah's Stencil Maker</title>
    <meta name="description" content="Transform any image into a clean, high-contrast stencil. Upload a photo, apply effects, and download your stencil instantly â€” powered by OpenCV.">
    <link rel="icon" href="favicon.ico">
    <!-- Open Graph -->
    <meta property="og:title" content="Eliah's Stencil Maker">
    <meta property="og:description" content="Turn any image into a clean stencil with adjustable intensity, effects, blur, and instant download.">
    <meta property="og:image" content="https://nutrinomics.github.io/preview.png">
    <meta property="og:url" content="https://nutrinomics.github.io">
    <meta property="og:type" content="website">
    <!-- Twitter / X -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Eliah's Stencil Maker">
    <meta name="twitter:description" content="Generate clean stencils from any image. Free, fast, and powered by OpenCV.">
    <meta name="twitter:image" content="https://nutrinomics.github.io/preview.png">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
    <!-- OpenCV.js -->
    <script async src="https://docs.opencv.org/4.12.0/opencv.js" onload="onOpenCvReady()"></script>
  </head>
  <body>
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index:1080">
      <div id="toastContainer"></div>
    </div>
    <div class="container py-4">
      <h1 class="text-center fw-bold mb-4 d-flex justify-content-center align-items-center gap-2">
        <img src="logo.svg" class="title-icon"> Eliah's Stencil Maker <img src="logo.svg" class="title-icon">
      </h1>
      <div class="row g-4">
        <!-- LEFT CONTROL PANEL -->
        <aside class="col-12 col-md-4">
          <!-- INPUT IMAGE -->
          <div class="card mb-3">
            <div class="card-header fw-bold d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#inputImageCollapse" role="button" style="cursor:pointer">
              <span data-i18n="inputImage">ğŸ–¼ï¸ Input Image</span>
              <span class="collapse-icon">â–¼</span>
            </div>
            <div id="inputImageCollapse" class="collapse show">
              <div class="card-body">
                <div id="dropZone" class="mb-3 text-muted small" data-i18n="dragDrop">Drag & Drop Image Here</div>
                <input type="file" id="imageFile" accept="image/*" class="d-none">
                <div class="input-group mb-2">
                  <input type="text" id="imageUrl" class="form-control" placeholder="Image URL" data-i18n="imageUrlPlaceholder">
                  <button id="loadUrlBtn" class="btn btn-primary" data-i18n="load">Load</button>
                </div>
                <button id="clearSavedBtn" class="btn btn-outline-secondary btn-sm" data-i18n="clearSaved">Clear Saved</button>
              </div>
            </div>
          </div>
          <!-- INTENSITY -->
          <div class="card mb-3">
            <div class="card-header fw-semibold d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#intensityCollapse" role="button" style="cursor:pointer">
              <span data-i18n="intensity">ğŸšï¸ Intensity</span>
              <span class="collapse-icon">â–¼</span>
            </div>
            <div id="intensityCollapse" class="collapse show">
              <div class="card-body">
                <label class="form-label small text-muted" data-i18n="intensityTip">Tip: adjust threshold to tune contrast.</label>
                <input type="range" id="thresholdRange" min="0" max="255" value="128" class="form-range mb-0 volume-slider">
              </div>
            </div>
          </div>
          <!-- EFFECTS -->
          <div class="card mb-3">
            <div class="card-header fw-semibold d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#effectsCollapse" role="button" style="cursor:pointer">
              <span data-i18n="effects">âœ¨ Effects</span>
              <span class="collapse-icon">â–¼</span>
            </div>
            <div id="effectsCollapse" class="collapse show">
              <div class="card-body">
                <label class="form-label small text-muted" data-i18n="effectsTip">Tip: toggle effects and preview result.</label>
                <div class="effect-group mb-0">
                  <div class="form-check mb-1">
                    <input class="form-check-input" type="checkbox" id="cannyCheckbox">
                    <label class="form-check-label" for="cannyCheckbox" data-i18n="edgeDetect">Edge Detect (Canny)</label>
                  </div>
                  <div class="form-check mb-1">
                    <input class="form-check-input" type="checkbox" id="sketchCheckbox">
                    <label class="form-check-label" for="sketchCheckbox" data-i18n="pencilSketch">Pencil Sketch</label>
                  </div>
                  <div class="form-check mb-1">
                    <input class="form-check-input" type="checkbox" id="posterizeCheckbox">
                    <label class="form-check-label" for="posterizeCheckbox" data-i18n="posterize">Posterize</label>
                  </div>
                  <div class="form-check mb-1">
                    <input class="form-check-input" type="checkbox" id="invertCheckbox">
                    <label class="form-check-label" for="invertCheckbox" data-i18n="invert">Invert</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Smooth Lines (collapsible) -->
          <div class="card mb-3">
            <div class="card-header fw-semibold d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#smoothCollapse" role="button" aria-expanded="true" aria-controls="smoothCollapse" style="cursor: pointer;">
              <span data-i18n="smoothLines">ğŸ§µ Smooth Lines</span>
              <span class="collapse-icon">â–¼</span>
            </div>
            <div id="smoothCollapse" class="collapse show">
              <div class="card-body">
                <label class="form-label small text-muted d-block" data-i18n="smoothTip"> Tip: cleans edges using morphology. </label>
                <div class="row gx-2 gy-2">
                  <div class="col-12">
                    <label class="form-label small text-muted mb-1" data-i18n="morphOperation">Operation</label>
                    <select id="morphOperation" class="form-select form-select-sm">
                      <option value="none" data-i18n="morphNone">None</option>
                      <option value="erode" data-i18n="morphErode">Erode</option>
                      <option value="dilate" data-i18n="morphDilate">Dilate</option>
                      <option value="open" data-i18n="morphOpen">Open (erode â†’ dilate)</option>
                      <option value="close" data-i18n="morphClose">Close (dilate â†’ erode)</option>
                      <option value="gradient" data-i18n="morphGradient">Gradient</option>
                    </select>
                  </div>
                  <div class="col-6">
                    <label class="form-label small text-muted mb-0" data-i18n="kernelSize">Kernel Size</label>
                    <input type="range" id="morphKernelRange" min="1" max="21" step="2" value="3" class="form-range volume-slider">
                  </div>
                  <div class="col-6">
                    <label class="form-label small text-muted mb-0" data-i18n="iterations">Iterations</label>
                    <input type="range" id="morphIterationsRange" min="0" max="5" step="1" value="1" class="form-range volume-slider">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- BLUR -->
          <div class="card mb-3">
            <div class="card-header fw-semibold d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#blurCollapse" role="button" style="cursor:pointer">
              <span data-i18n="blur">ğŸ§¼ Blur</span>
              <span class="collapse-icon">â–¼</span>
            </div>
            <div id="blurCollapse" class="collapse show">
              <div class="card-body">
                <label class="form-label small text-muted" data-i18n="blurTip">Tip: use Gaussian Blur to remove small artifacts.</label>
                <input type="range" id="gaussianBlurRange" min="1" max="25" step="2" value="1" class="form-range mb-0 volume-slider">
              </div>
            </div>
          </div>
        </aside>
        <!-- PREVIEW SECTION -->
        <main class="col-12 col-md-8">
          <div class="viewer-panel shadow-sm p-3">
            <div class="text-center mb-3">
              <img id="previewImg" class="img-fluid preview-area">
            </div>
            <div class="text-center">
              <canvas id="canvas" class="d-none stencil-area"></canvas>
            </div>
          </div>
          <div class="text-center mt-3">
            <a id="downloadBtn" class="btn btn-dark d-none" download="stencil.png" data-i18n="downloadStencil">Download Stencil</a>
          </div>
        </main>
      </div>
    </div>
    <!-- THEME TOGGLE -->
    <div id="themeToggleWrapper" class="position-fixed top-0 start-0 m-2 z-3 bg-body-secondary bg-opacity-25 rounded-pill shadow-sm px-3 py-2" role="button" style="cursor:pointer">
      <span id="themeIcon" class="fs-4">â˜€ï¸</span>
    </div>
    <!-- LANGUAGE TOGGLE -->
    <div id="languageToggleWrapper" class="position-fixed top-0 end-0 m-2 z-3 bg-body-secondary bg-opacity-25 rounded-pill shadow-sm px-3 py-2">
      <select id="languageSelector" class="form-select form-select-sm">
        <option value="en">ğŸ‡¬ğŸ‡§ English</option>
        <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
        <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
      </select>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
